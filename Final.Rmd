---
title: "Final Project"
author: "Jack Schroeder"
date: "4/4/2019"
output:
  html_document:
    df_print: paged

citation_package: natbib
bibliography: references.bib
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# I only need tidyverse for the time being. Once I start replicating the figures, I will
# likely need some other libraries.

library(tidyverse)

# Smith and Martin leave two data files in the Dataverse. Both of them contain the same
# data. Since I'm more familiar with reading in a csv file versus a dta file (and I
# want to limit the libraries called), I read in their csv data in as csv_data.

csv_data <- read_csv("Smith-Martin-Replication-Data/IRELAND-CANDIDATES.csv")

```


```{r data cleaning, echo=FALSE}

# Smith and Martin recode a lot of values before going into their analysis. I am going
# to translate this part of their work and leave the figures themselves for a later
# time.

csv_data <- csv_data %>% 

# The first mutate is a scalar value of whether a politician is a legacy. What are these
# values? pre_mp is equal to 1 if past family members were elected to the Dail
# (Ireland's) lower house. cablegacy is coded 1 if their direct predecessor served in
# cabinet. All other values on this scale are equal to 0.
  
  mutate(legacyscale = case_when(pre_mp == 1 ~ 1,
                                 cablegacy == 1 ~ 2,
                                 TRUE ~ 0),
  
# cwins is the number of times (including the current term) the candidate has won
# election to the Dail. est_age is the estimated age of each candidate (if unknown) or
# the actual age (which is found in age). This age is taken from when the candidate
# runs/wins for the first time. Presumably Smith and Martin wanted to see if these
# numbers are still influential on an exponential scale.

         cwins2 = cwins^2,
        est_age2 = est_age^2,
        age2 = age^2,

# Then we have to recode some values already in the dataset into groups. The first is
# a group of estimated ages. The next is recoding educode to new values. educode refers
# to the highest degree received. 1 is primary school, 2 is secondary school, 3 is 
# tertiary, 4 university, and 5 postgraduate. They recode tertiary and university to have
# the same value in educode2.

        agegroup = case_when(est_age > 29 ~ 1,
                             est_age > 39 ~ 2,
                             est_age > 49 ~ 3,
                             est_age > 59 ~ 4,
                             TRUE ~ 0),
        educode2 = case_when(educode == 2 ~ 1,
                             educode == 3 ~ 2,
                             educode == 4 ~ 2,
                             educode == 5 ~ 3,
                             TRUE ~ as.double(educode)),

# The next recode focuses on the Dail term. There had been 32 Dail terms by 2016, but 
# the current dataset only looks at them as the term number. Since these terms have
# varying lengths, recoding them into years may yield stronger results on legacy.

        dailyear = case_when(dail ==  1 ~ 1918 ,
                             dail ==  2 ~ 1921,
                             dail ==  3 ~ 1922,
                             dail ==  4 ~ 1923,
                             dail ==  5 ~ 1927,
                             dail ==  6  ~ 1927,
                             dail ==  7 ~ 1932,
                             dail ==  8 ~ 1933,
                             dail ==  9 ~ 1937,
                             dail ==  10 ~ 1938,
                             dail ==  11 ~ 1943,
                             dail ==  12 ~ 1944,
                             dail ==  13 ~ 1948,
                             dail ==  14 ~ 1951,
                             dail ==  15 ~ 1954,
                             dail ==  16 ~ 1957,
                             dail ==  17 ~ 1961,
                             dail ==  18 ~ 1965,
                             dail ==  19 ~ 1969,
                             dail ==  20 ~ 1973,
                             dail ==  21 ~ 1977,
                             dail ==  22 ~ 1981,
                             dail ==  23 ~ 1982,
                             dail ==  24 ~ 1982,
                             dail ==  25 ~ 1987,
                             dail ==  26 ~ 1989,
                             dail ==  27 ~ 1992,
                             dail ==  28 ~ 1997,
                             dail ==  29 ~ 2002,
                             dail ==  30 ~ 2007,
                             dail ==  31 ~ 2011,
                             dail ==  32 ~ 2016),

# Smith and Martin also recode a few partyid values to a new vector named
# partyidsimple. The changes are minor. Christian Centrists are lumped in with
# the Christian Solidarity, Sinn Fein's workers' parties are lumped in with
# the other workers' parties, Independent Fianna Fail and Fine Gael are recoded
# into their larger counterparts, and some smaller parties are recoded into the
# value 30, which contains other minor parties and non-parties.

      partyidsimple = case_when(partyid == 9 ~ 8,
                                partyid == 14 ~ 15,
                                partyid == 11 ~ 1,
                                partyid == 12 ~ 2,
                                partyid == 16 ~ 30,
                                partyid == 18 ~ 30,
                                partyid == 23 ~ 30,
                                partyid == 26 ~ 30,
                                partyid == 16 ~ 30,
                                TRUE ~ as.double(partyid))) %>% 
  
# Lastly, Smith and Martin filter out results from before 1944. This
# is done to focus on the previous 20 Dails.
  
  filter(elecyear > 1943)

# One more thing need to be taken care of first. There was an Irish 
# politician named James Dillon. He was an independent associated with
# the Fine Gael party for most of his career. Smith and Martin go to
# great lengths to make sure he is coded as FG throughout the entire
# dataset. This makes enough sense from a cursory glance of his electoral
# history: he was leader of FG from 1959-1965. I'll indulge the authors and
# recode him.

csv_data <- csv_data %>% 
  mutate(party = case_when(name == "Dillon, James" ~ "FG",
                           TRUE ~ party),
         partyid = case_when(name == "Dillon, James" ~ 2,
                             TRUE ~ as.double(partyid)),
         govparty = case_when(name == "Dillon, James" & elecyear == 1948 ~ 1,
                              TRUE ~ as.double(govparty)))

```

## References